/**
 * Simple model for AngularJS
 * @version v0.1.0
 * @link http://github.com/sroze/angular-simple-model
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="angular-simple-model"),function(a,b,c){"use strict";function d(a){var b=function(a,b){this.options=b||{},this.initialize(arguments)};return b.prototype.initialize=function(){this.options.baseUrl&&(this.baseUrl=this.options.baseUrl)},b.prototype.computeUrl=function(a,b){if(b!=c&&"object"==typeof b)for(var d in b)a=a.replace("{"+d+"}",b[d]);return a},b.prototype.parse=function(a){return a.data},b.prototype.getOption=function(a){return this.options[a]},b.prototype.setOption=function(a,b){this.options[a]=b},b.prototype.prepare=function(a){return a},b.prototype.fetch=function(a){return this.sync("GET",c,a)},b.prototype.save=function(a){return this.sync("POST",this.prepare(this.attributes),a)},b.prototype.destroy=function(a){return this.sync("DELETE",c,a)},b.prototype.sync=function(b,d,e){e=e||{},e.method=e.method||b,d=d||e.data;var f=e.url||l(this,"url"),g=this;return"GET"==b&&d!=c&&(f+=-1==f.indexOf("?")?"?":"&",f+=$.param(d)),a({url:f,method:b,data:d}).then(function(a){var b=g.parse(a,e);g.set(b)})},b.extend=k,b}function e(a){return a.extend({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.attributes=b||{}},has:function(a){return a in this.attributes},get:function(a){return this.attributes[a]},set:function(a,b){if("string"==typeof a)this.attributes[a]=b;else if("object"==typeof a)for(var c in a)this.set(c,a[c])},save:function(b,c){return this.set(b),a.prototype.save.call(this,c)},url:function(){return this.computeUrl(this.baseUrl,this.attributes)}})}function f(a){return a.extend({constructor:function(b){a.prototype.constructor.apply(this,arguments),this.models=b||{}},getAttributesArray:function(){for(var a=[],b=0;b<this.models.length;b++)a.push(this.models[b].attributes);return a},url:function(){return this.computeUrl(this.baseUrl)},set:function(a,b){if(a.length!=c){this.models=[];for(var d=0;d<a.length;d++)this.models.push(this._prepareModel(a[d],b))}},_prepareModel:function(a,b){return new this.model(a,b)}})}var g=Array.prototype.forEach,h=function(a,b,c){null!=a&&g&&a.forEach===g&&a.forEach(b,c)},i=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},j=function(a){return h(Array.prototype.slice.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},k=function(a,b){var c,d=this;c=a&&i(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},j(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&j(c.prototype,a),c.__super__=d.prototype,c},l=function(a,b){if(null==a)return void 0;var c=a[b];return"function"==typeof c?c.call(a):c};b.module("angular-simple-model",["ng"]),d.$inject=["$http"],b.module("angular-simple-model").factory("BaseModel",d),e.$inject=["BaseModel"],b.module("angular-simple-model").factory("Model",e),f.$inject=["BaseModel"],b.module("angular-simple-model").factory("Collection",f)}(window,window.angular);